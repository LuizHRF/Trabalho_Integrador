{"ast":null,"code":"var _jsxFileName = \"/home/gabrielli/Trabalho_Integrador/Projeto/frontend/src/components/Login.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\n// import PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport { Alert, Box, Button, Snackbar, Stack, TextField } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login(props) {\n  _s();\n  const [username, setUsername] = React.useState(\"\");\n  const [passwd, setPasswd] = React.useState(\"\");\n  const [openMessage, setOpenMessage] = React.useState(false);\n  const [messageText, setMessageText] = React.useState(\"\");\n  const [messageSeverity, setMessageSeverity] = React.useState(\"success\");\n  async function enviaLogin(event) {\n    event.preventDefault();\n    try {\n      const response = await axios.post(\"/login\", {\n        cpf: username,\n        password: passwd\n      });\n      console.log(response);\n      if (response.status >= 200 && response.status < 300) {\n        // Salva o token JWT na sessão\n        localStorage.setItem(\"token\", response.data.token);\n        // seta o estado do login caso tudo deu certo\n        props.onLogin();\n      } else {\n        // falha\n        console.error(\"Falha na autenticação\");\n      }\n    } catch (error) {\n      console.log(error);\n      setOpenMessage(true);\n      setMessageText(\"Falha ao logar usuário!\");\n      setMessageSeverity(\"error\");\n    }\n  }\n  function cancelaLogin() {\n    if (username !== \"\" || passwd !== \"\") {\n      setUsername(\"\");\n      setPasswd(\"\");\n    }\n    setOpenMessage(true);\n    setMessageText(\"Login cancelado!\");\n    setMessageSeverity(\"warning\");\n  }\n  function handleCloseMessage(_, reason) {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setOpenMessage(false);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    style: {},\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        width: \"25%\",\n        margin: 'auto',\n        marginTop: \"200px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Stack, {\n        spacing: 2,\n        style: {},\n        children: [/*#__PURE__*/_jsxDEV(Stack, {\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            required: true,\n            id: \"username-input\",\n            label: \"User: \",\n            size: \"small\",\n            value: username,\n            onChange: event => {\n              setUsername(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            required: true,\n            id: \"passwd-input\",\n            label: \"Password: \",\n            type: \"password\",\n            size: \"small\",\n            value: passwd,\n            onChange: event => {\n              setPasswd(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"row\",\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            style: {\n              maxWidth: \"100px\",\n              minWidth: \"100px\"\n            },\n            color: \"primary\",\n            onClick: enviaLogin,\n            children: \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            style: {\n              maxWidth: \"100px\",\n              minWidth: \"100px\"\n            },\n            color: \"error\",\n            onClick: cancelaLogin,\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n          open: openMessage,\n          autoHideDuration: 6000,\n          onClose: handleCloseMessage,\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            severity: messageSeverity,\n            onClose: handleCloseMessage,\n            children: messageText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 3\n  }, this);\n}\n\n// Login.propTypes = {\n// \tsetToken: PropTypes.func.isRequired,\n// };\n_s(Login, \"H+i51DF2MIQiZatcNFY0HcKj+bA=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","axios","Alert","Box","Button","Snackbar","Stack","TextField","jsxDEV","_jsxDEV","Login","props","_s","username","setUsername","useState","passwd","setPasswd","openMessage","setOpenMessage","messageText","setMessageText","messageSeverity","setMessageSeverity","enviaLogin","event","preventDefault","response","post","cpf","password","console","log","status","localStorage","setItem","data","token","onLogin","error","cancelaLogin","handleCloseMessage","_","reason","style","children","width","margin","marginTop","spacing","required","id","label","size","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","type","direction","variant","maxWidth","minWidth","color","onClick","open","autoHideDuration","onClose","severity","_c","$RefreshReg$"],"sources":["/home/gabrielli/Trabalho_Integrador/Projeto/frontend/src/components/Login.jsx"],"sourcesContent":["import React from \"react\";\n// import PropTypes from \"prop-types\";\nimport axios from \"axios\";\n\nimport {\n\tAlert,\n\tBox,\n\tButton,\n\tSnackbar,\n\tStack,\n\tTextField,\n} from \"@mui/material\";\n\nexport default function Login(props) {\n\tconst [username, setUsername] = React.useState(\"\");\n\tconst [passwd, setPasswd] = React.useState(\"\");\n\n\tconst [openMessage, setOpenMessage] = React.useState(false);\n\tconst [messageText, setMessageText] = React.useState(\"\");\n\tconst [messageSeverity, setMessageSeverity] = React.useState(\"success\");\n\n\tasync function enviaLogin(event) {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tconst response = await axios.post(\"/login\", {\n\t\t\t\tcpf: username,\n\t\t\t\tpassword: passwd,\n\t\t\t});\n\t\t\tconsole.log(response);\n\t\t\tif (response.status >= 200 && response.status < 300) {\n\t\t\t\t// Salva o token JWT na sessão\n\t\t\t\tlocalStorage.setItem(\"token\", response.data.token);\n\t\t\t\t// seta o estado do login caso tudo deu certo\n\t\t\t\tprops.onLogin();\n\t\t\t} else {\n\t\t\t\t// falha\n\t\t\t\tconsole.error(\"Falha na autenticação\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tsetOpenMessage(true);\n\t\t\tsetMessageText(\"Falha ao logar usuário!\");\n\t\t\tsetMessageSeverity(\"error\");\n\t\t}\n\t}\n\n\tfunction cancelaLogin() {\n\t\tif (username !== \"\" || passwd !== \"\") {\n\t\t\tsetUsername(\"\");\n\t\t\tsetPasswd(\"\");\n\t\t}\n\t\tsetOpenMessage(true);\n\t\tsetMessageText(\"Login cancelado!\");\n\t\tsetMessageSeverity(\"warning\");\n\t}\n\n\tfunction handleCloseMessage(_, reason) {\n\t\tif (reason === \"clickaway\") {\n\t\t\treturn;\n\t\t}\n\t\tsetOpenMessage(false);\n\t}\n\n\treturn (\n\t\t<Box style={{}}>\n\t\t\n\t\t<Box style={{width:\"25%\", margin: 'auto', marginTop: \"200px\"}}>\n\t\t\t<Stack spacing={2} style={{}}>\n\t\t\t\t<Stack spacing={2}>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tid=\"username-input\"\n\t\t\t\t\t\tlabel=\"User: \"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\tsetUsername(event.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tid=\"passwd-input\"\n\t\t\t\t\t\tlabel=\"Password: \"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tvalue={passwd}\n\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\tsetPasswd(event.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Stack>\n\t\t\t\t<Stack direction=\"row\" spacing={3}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmaxWidth: \"100px\",\n\t\t\t\t\t\t\tminWidth: \"100px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tonClick={enviaLogin}\n\t\t\t\t\t>\n\t\t\t\t\t\tEnviar\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmaxWidth: \"100px\",\n\t\t\t\t\t\t\tminWidth: \"100px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\t\tonClick={cancelaLogin}\n\t\t\t\t\t>\n\t\t\t\t\t\tCancelar\n\t\t\t\t\t</Button>\n\t\t\t\t</Stack>\n\t\t\t\t<Snackbar\n\t\t\t\t\topen={openMessage}\n\t\t\t\t\tautoHideDuration={6000}\n\t\t\t\t\tonClose={handleCloseMessage}\n\t\t\t\t>\n\t\t\t\t\t<Alert\n\t\t\t\t\t\tseverity={messageSeverity}\n\t\t\t\t\t\tonClose={handleCloseMessage}\n\t\t\t\t\t>\n\t\t\t\t\t\t{messageText}\n\t\t\t\t\t</Alert>\n\t\t\t\t</Snackbar>\n\t\t\t</Stack>\n\t\t</Box>\n\t</Box>\n\t);\n}\n\n// Login.propTypes = {\n// \tsetToken: PropTypes.func.isRequired,\n// };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}